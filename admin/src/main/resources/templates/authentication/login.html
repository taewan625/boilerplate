<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>로그인</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light d-flex align-items-center justify-content-center vh-100">

<div class="card shadow-lg p-4" style="width: 360px; border-radius: 1rem;">
  <h3 class="text-center mb-4">로그인</h3>
  <form id="loginForm">
    <div class="mb-3">
      <label for="username" class="form-label">아이디</label>
      <input type="text" id="username" name="username" class="form-control" placeholder="아이디 입력" required>
    </div>
    <div class="mb-3">
      <label for="password" class="form-label">비밀번호</label>
      <input type="password" id="password" name="password" class="form-control" placeholder="비밀번호 입력" required>
    </div>
    <button type="submit" class="btn btn-primary w-100">로그인</button>
    <div id="error-message" class="text-danger text-center mt-3"></div>
  </form>
</div>

<script>
    document.getElementById('loginForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const formData = new FormData(event.target);
        const searchParams = new URLSearchParams();
        for (const pair of formData) searchParams.append(pair[0], pair[1]);

        const errorMessageDiv = document.getElementById('error-message');
        errorMessageDiv.textContent = '';

        fetch('/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: searchParams.toString(),
        })
            .then(response => {
                if (response.ok) {
                    window.location.href = '/';
                } else {
                    errorMessageDiv.textContent = '아이디 또는 비밀번호가 올바르지 않습니다.';
                }
            })
            .catch(() => {
                errorMessageDiv.textContent = '로그인 중 오류가 발생했습니다.';
            });
    });
</script>

</body>
</html>
